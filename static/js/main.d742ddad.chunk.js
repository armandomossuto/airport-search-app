(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(33)},25:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(8),s=a(10),c=a(9),l=a(11),o=a(0),u=a.n(o),i=a(17),m=a.n(i),h=(a(25),a(36)),p=a(37),g=a(3),d=a(38),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={redirect:!1,searchParam:""},a.checkKey=a.checkKey.bind(Object(g.a)(Object(g.a)(a))),a.onChange=a.onChange.bind(Object(g.a)(Object(g.a)(a))),a.onSubmit=a.onSubmit.bind(Object(g.a)(Object(g.a)(a))),a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"checkKey",value:function(e){"Enter"===e.key&&this.onSubmit()}},{key:"onChange",value:function(e){this.setState({searchParam:e.target.value})}},{key:"onSubmit",value:function(){this.setState({redirect:!0})}},{key:"render",value:function(){var e=this.state,t=e.redirect,a=e.searchParam;return t?u.a.createElement(d.a,{push:!0,to:"/search?query="+a+"?page=1"}):u.a.createElement("div",null,u.a.createElement("input",{type:"text",placeholder:"Name, City, IATA code, ...",value:a,onChange:this.onChange,onKeyDown:this.checkKey}),u.a.createElement("button",{type:"submit",onClick:this.onSubmit},u.a.createElement("img",{src:"search_icon.png",alt:""})))}}]),t}(o.Component),y=function(){return u.a.createElement("div",{className:"front-page"},u.a.createElement("p",null," Do you want to find an airport? "),u.a.createElement(E,null))},b=function(){return u.a.createElement("div",{className:"no-results"},u.a.createElement("p",{className:"error-404"}," 404 "),u.a.createElement("p",null," There was a problem with the server. Please try again later "))},v=function(e){var t=e.searchParam;return u.a.createElement("div",{className:"no-results"},u.a.createElement("div",null,u.a.createElement("p",null," Your search - ",u.a.createElement("b",null," ",t," ")," - did not match any airport. "),u.a.createElement("p",null," Suggestions: "),u.a.createElement("ul",null,u.a.createElement("li",null,"Make sure that all words are spelled correctly."),u.a.createElement("li",null,"Try different keywords."))))},f=function(e){var t=e.pages_array,a=e.resultstoShow,r=e.onClick,n=e.page;return u.a.createElement("div",{className:"results"},u.a.createElement("p",null," Your search returned the following results: "),u.a.createElement("div",{className:"results-display"},a.map(function(e,t){return u.a.createElement("div",{key:t},u.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.airport.name}}),u.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.airport.location}}))})),u.a.createElement("div",{className:"pages-menu"},"Page: ",t.map(function(e,t){return u.a.createElement("span",{key:t,className:n==e?"selected-page":null,onClick:r},e)})))},k=function(){return u.a.createElement("div",{className:"no-results"},u.a.createElement("p",null," Loading your search results. please wait a few seconds "))},j=function(e){var t=e.URL;return u.a.createElement("div",{className:"no-results"},u.a.createElement("p",{className:"error-400"}," Not found "),u.a.createElement("p",null," Your URL parameters ",u.a.createElement("b",null,t)," have improper format "))},O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={searchResults:"",searchParam:"",page:"",status:"loading",resultstoShow:"",pages_array:""},a.handleErrors=a.handleErrors.bind(Object(g.a)(Object(g.a)(a))),a.processData=a.processData.bind(Object(g.a)(Object(g.a)(a))),a.changePage=a.changePage.bind(Object(g.a)(Object(g.a)(a))),a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=/\?query=(.*)\?page=(.*)/.exec(this.props.location.search);if(null===t)return this.setState({status:"bad_request"});var a=t[1],r="https://cors-anywhere.herokuapp.com/https://embed-staging.nezasa.com/api1/airports?query="+a+"&useCOResponse=true&contentLang=en";console.log(r),fetch(r).then(function(t){return e.handleErrors(t)}).then(function(e){return e.json()}).then(function(r){return e.processData(r,a,t[2])})}},{key:"handleErrors",value:function(e){return e.ok?this.setState({status:"ok"}):this.setState({status:"error"}),e}},{key:"processData",value:function(e,t,a){for(var r=t.split(/%20| /),n=e,s=0;s<r.length;s++)for(var c=new RegExp("("+r[s]+")","gi"),l=0;l<e.length;l++)n[l].airport.name=e[l].airport.name.replace(c,"<mark>$1</mark>"),n[l].airport.city=e[l].airport.city.replace(c,"<mark>$1</mark>"),n[l].airport.country=e[l].airport.country.replace(c,"<mark>$1</mark>"),n[l].airport.location='<img alt="" src="location-icon.jpg" />'+n[l].airport.city+","+n[l].airport.country;var o=parseInt(n.length/12+1);(a>o||isNaN(a))&&(a=o);for(var u=n.slice(12*(a-1),12*(a-1)+12),i=[],m=0;m<o;m++)i.push(m+1);var h=t.replace("%20"," ");this.setState({searchResults:n,page:a,searchParam:h,status:"ok",resultstoShow:u,pages_array:i})}},{key:"changePage",value:function(e){var t=this.state.searchParam;this.props.history.push("/search?query="+t+"?page="+e.target.textContent)}},{key:"componentWillReceiveProps",value:function(){var e=this.state,t=(e.page,e.searchResults),a=/\?page=(.*)/;if(null===a.exec(this.props.history.location.search))return this.setState({status:"bad_request"});var r=a.exec(this.props.history.location.search)[0].replace("?page=",""),n=t.slice(12*(r-1),12*(r-1)+12);this.setState({resultstoShow:n,page:r})}},{key:"render",value:function(){var e=this.state,t=(e.searchResults,e.pages_array),a=e.status,r=e.searchParam,n=e.resultstoShow,s=e.page;switch(a){case"loading":return u.a.createElement(k,null);case"bad_request":return u.a.createElement(j,{URL:this.props.location.search});case"error":return u.a.createElement(b,null);case"ok":return 0===n.length?u.a.createElement(v,{searchParam:r}):u.a.createElement(f,{pages_array:t,resultstoShow:n,onClick:this.changePage,page:s})}}}]),t}(o.Component),w=a(35),S=function(){return u.a.createElement("nav",null,u.a.createElement("ul",null,u.a.createElement("li",null," ",u.a.createElement(w.a,{to:"/"},u.a.createElement("img",{src:"home_icon.png",alt:""}))," ")))},C=a(18),P=a.n(C)()({basename:"/airport-search-app"}),N=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return u.a.createElement(h.a,{history:P},u.a.createElement("div",null,u.a.createElement(S,null),u.a.createElement(p.a,{exact:!0,path:"/",component:y}),u.a.createElement(p.a,{path:"/search",component:O}),u.a.createElement("footer",null," ",u.a.createElement("div",null," Created by Armando Mossuto ")," ")))}}]),t}(o.Component);m.a.render(u.a.createElement(N,null),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.d742ddad.chunk.js.map